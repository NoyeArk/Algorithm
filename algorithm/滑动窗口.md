# 滑动窗口

# 1 算法介绍

滑动窗口，顾名思义，就是有一个大小可变的窗口，左右两端方向一致的向前滑动（右端固定，左端滑动；左端固定，右端滑动）。

可以想象成队列，一端在push元素，另一端在pop元素，如下所示：

![](image/滑动窗口/image.png)

一般题目中都会有明确的“**连续子数组**”、“**连续子串**”等关键字，另外可能会附带**最大**、**最小**的限定词进行补充。

滑动窗口类型的题目可以分为定长和不定长，即窗口的长度是否是固定的。

滑动窗口不同题目的不同在于：

1. 窗口内维护的信息不同
2. 窗口变化的条件不同

---

# 2 定长滑动窗口模板

```python
init: l = 0, ans = 最小值 or 最大值
for 右边界 in 可迭代对象:
	更新窗口内部信息
	if 右边界 - 左边界 = 定长窗口大小：
		比较并更新 ans  # 收缩窗口时
		收缩窗口大小
return ans
```

---

# 3 不定长滑窗算法模板

1. 在序列中使用双指针中的左右指针技巧，初始化 $l = r = 0$，把索引闭区间 $[l, r]$ 称为一个窗口。
2. 先不断地增加 $r$ 指针扩大窗口 $[l, r]$，直到窗口中的序列符合要求。
3. 此时，停止增加 $r$，转而不断增加 $l$ 指针缩小窗口 $[l, r]$，直到窗口中的序列不再符合要求。同时，每次增加 $l$ 前，都要更新一轮结果。
4. 重复第 2 和第 3 步，直到 $r$ 到达序列的尽头。

思路其实很简单：第 2 步相当于在寻找一个可行解，然后第 3 步在优化这个可行解，最终找到最优解。左右指针轮流前进，窗口大小增增减减，窗口不断向右滑动。

模板如下：

```python
init: l = 0, ans = 最小值 or 最大值
for 右边界 in 可迭代对象:
	更新窗口内部信息
	while 根据题意进行调整：
		比较并更新 ans  # 收缩窗口时
		扩张或收缩窗口大小
	比较并更新 ans  # 扩张窗口时（可选）
return ans
```

---

# 3 例题

## 3.1 定长滑动窗口

### 3.1.1 基础

1. [1456. 定长子串中元音的最大数目](/leetcode/其他/1456.%20定长子串中元音的最大数目.md)
2. [643. 子数组最大平均数 I](/leetcode/其他/643.%20子数组最大平均数%20I.md)
3. [1343. 大小为 K 且平均值大于等于阈值的子数组数目](/leetcode/其他/1343.%20大小为%20K%20且平均值大于等于阈值的子数组数目.md)
4. [2461. 长度为 K 子数组中的最大和](/leetcode/其他/2461.%20长度为%20K%20子数组中的最大和.md)
5. [2841. 几乎唯一子数组的最大和](/leetcode/其他/2841.%20几乎唯一子数组的最大和.md)

## 3.2 不定长滑动窗口

不定长滑动窗口主要分为三类：求最长子数组，求最短子数组，以及求子数组个数。

### 3.2.1 求最长/最大值

一般题目都有「至多」的要求。

1. [3. 无重复字符的最长子串](/leetcode/7-面试经典%20150%20题/3-滑动窗口/3.%20无重复字符的最长子串.md)
3. [3090. 每个字符最多出现两次的最长子字符串](/leetcode/其他/3090.%20每个字符最多出现两次的最长子字符串.md)
4. [1493. 删掉一个元素以后全为 1 的最长子数组](/leetcode/其他/1493.%20删掉一个元素以后全为%201%20的最长子数组.md)
5. [1208. 尽可能使字符串相等](/leetcode/其他/1208.%20尽可能使字符串相等.md)
6. [2958. 最多 K 个重复元素的最长子数组](/leetcode/其他/2958.%20最多%20K%20个重复元素的最长子数组.md)
7. [1004. 最大连续1的个数 III](/leetcode/其他/1004.%20最大连续1的个数%20III.md)
8. [LCR 016. 无重复字符的最长子串](/leetcode/8-119经典题变种挑战/挑战%203：字符串/LCR%20016.%20无重复字符的最长子串.md)
9. [904. 水果成篮](/leetcode/其他/904.%20水果成篮.md)
10. [2730. 找到最长的半重复子字符串](/leetcode/其他/2730.%20找到最长的半重复子字符串.md)

### 3.2.2 求最短/最小值

一般题目都有「至少」的要求。

1. [3325. 字符至少出现 K 次的子字符串 I](/leetcode/5-周赛/第%20420%20场周赛/3325.%20字符至少出现%20K%20次的子字符串%20I.md)
2. [LCR 008. 长度最小的子数组](/leetcode/8-119经典题变种挑战/挑战%202：数组/LCR%20008.%20长度最小的子数组.md)

### 3.2.2 求子数组个数

1. [3258. 统计满足 K 约束的子字符串数量 I](/leetcode/4-每日一题/3258.%20统计满足%20K%20约束的子字符串数量%20I.md)
2. [3261. 统计满足 K 约束的子字符串数量 II](/leetcode/4-每日一题/3261.%20统计满足%20K%20约束的子字符串数量%20II.md)
3. [3297. 统计重新排列后包含另一个字符串的子字符串数目 I](/leetcode/5-周赛/第%20416%20场周赛/3297.%20统计重新排列后包含另一个字符串的子字符串数目%20I.md)
4. [3298. 统计重新排列后包含另一个字符串的子字符串数目 II](/leetcode/5-周赛/第%20416%20场周赛/3298.%20统计重新排列后包含另一个字符串的子字符串数目%20II.md)